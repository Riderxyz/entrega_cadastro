  <form #entregaForm="ngForm" (ngSubmit)="onSubmit(entregaForm)">
    <div class="grid formgrid">
      <!-- Dados básicos -->
      <div class="col-12">
        <h3 class="m-0">Dados da Entrega</h3>
        <p-divider></p-divider>
      </div>

      <div class="field col-12 md:col-6">
        <label for="cliente">Cliente *</label>
        <input
          pInputText
          id="cliente"
          name="cliente"
          required
          minlength="3"
          [(ngModel)]="entregaObject.cliente"
          #cliente="ngModel"
          placeholder="Nome do cliente" />

      </div>

      <div class="field col-12 md:col-6">
        <label for="produto">Produto *</label>
        <input
          pInputText
          id="produto"
          name="produto"
          required
          minlength="2"
          [(ngModel)]="entregaObject.produto"
          #produto="ngModel"
          placeholder="Descrição do produto" />

      </div>

      <div class="field col-12 md:col-4" *ngIf="entregaObject.status === EntregaStatus.Entregue">
        <label for="dataEnvio">Data de Envio *</label>
        <p-calendar
          inputId="dataEnvio"
          name="dataEnvio"
          [(ngModel)]="entregaObject.dataEnvio"
          #dataEnvio="ngModel"
          [required]="true"
          [showIcon]="true"
          dateFormat="dd/mm/yy"
          styleClass="w-full">
        </p-calendar>

      </div>

      <div class="field col-12" [class.md:col-6]="entregaObject.status !== EntregaStatus.Entregue"
      [class.md:col-4] = "entregaObject.status === EntregaStatus.Entregue">
        <label for="dataEstimadaEntrega">Estimativa de Entrega *</label>
        <p-calendar
          inputId="dataEstimadaEntrega"
          name="dataEstimadaEntrega"
          [(ngModel)]="entregaObject.dataEstimadaEntrega"
          #dataEstimadaEntrega="ngModel"
          [required] = "true"
          [showIcon]="true"
          dateFormat="dd/mm/yy"
          [minDate]="minEntrega"
          styleClass="w-full">
        </p-calendar>
      </div>

      <div class="field col-12" [class.md:col-6]="entregaObject.status !== EntregaStatus.Entregue"
      [class.md:col-4] = "entregaObject.status === EntregaStatus.Entregue">
        <label for="status">Status *</label>
        <p-dropdown
          inputId="status"
          name="status"
          [options]="statusOptions"
          optionLabel="label"
          optionValue="value"
          [(ngModel)]="entregaObject.status"
          #status="ngModel"
          [required]="true"
          placeholder="Selecione"
          styleClass="w-full">
        </p-dropdown>
      </div>

      <div class="field col-12">
        <label for="observacoes">Observações</label>
        <textarea
          pInputTextarea
          id="observacoes"
          name="observacoes"
          [(ngModel)]="entregaObject.observacoes"
          rows="3"
          [autoResize]="true"
          placeholder="Notas adicionais..."
          styleClass="w-full"
          class="w-full"></textarea>
      </div>

      <!-- Endereço -->
      <div class="col-12">
        <h3 class="m-0">Endereço</h3>
        <p-divider></p-divider>
      </div>

      <div ngModelGroup="endereco" #enderecoGroup="ngModelGroup" class="grid w-full">
        <div class="field col-12 md:col-3">
          <label for="cep">CEP *</label>
          <p-inputMask
            mask="99999-999"
            id="cep"
            name="cep"
            [(ngModel)]="entregaObject.endereco.cep"
            (ngModelChange)="onCepChange()"
            #cep="ngModel"
            [required] = "true"
            placeholder="00000-000">
          </p-inputMask>
        </div>

        <div class="field col-12 md:col-7">
          <label for="logradouro">Logradouro *</label>
          <input
            pInputText
            id="logradouro"
            name="logradouro"
            required
            [(ngModel)]="entregaObject.endereco.logradouro"
            #logradouro="ngModel"
            placeholder="Rua/Avenida" />
        </div>

        <div class="field col-12 md:col-2">
          <label for="numero">Número *</label>
          <input
            pInputText
            id="numero"
            name="numero"
            required
            [(ngModel)]="entregaObject.endereco.numero"
            #numero="ngModel"
            placeholder="Nº" />
        </div>

        <div class="field col-12 md:col-6">
          <label for="bairro">Bairro *</label>
          <input
            pInputText
            id="bairro"
            name="bairro"
            required
            [(ngModel)]="entregaObject.endereco.bairro"
            #bairro="ngModel"
            placeholder="Bairro" />
        </div>

        <div class="field col-12 md:col-6">
          <label for="localidade">Cidade *</label>
          <input
            pInputText
            id="localidade"
            name="localidade"
            required
            [(ngModel)]="entregaObject.endereco.localidade"
            #localidade="ngModel"
            placeholder="Cidade" />

        </div>

<div class="field col-12 md:col-4">
  <label for="regiao">Região *</label>
  <p-dropdown
    inputId="regiao"
    name="regiao"
    [options]="regioesOptions"
    [(ngModel)]="entregaObject.endereco.regiao"
    (onChange)="onChangeRegiao($event.value)"
    placeholder="Selecione a Região"
    styleClass="w-full">
  </p-dropdown>
</div>

<!-- Dropdown UF -->
<div class="field col-12 md:col-4">
  <label for="uf">UF *</label>
  <p-dropdown
    inputId="uf"
    name="uf"
    [options]="ufOptions"
    [(ngModel)]="entregaObject.endereco.uf"
    (onChange)="onChangeUf($event.value)"
    placeholder="Selecione a UF"
    [disabled]="!entregaObject.endereco.regiao"
    styleClass="w-full">
  </p-dropdown>
</div>

<!-- Campo Estado (nome completo, preenchido automático) -->
<div class="field col-12 md:col-4">
  <label for="estado">Estado</label>
  <input
    pInputText
    id="estado"
    name="estado"
    [(ngModel)]="entregaObject.endereco.estado"
    [readonly]="true"
    style="background-color: #f9f9f9" />
</div>

       <div class="field col-12 md:col-12">
          <label for="complemento">Complemento</label>
          <input
            pInputText
            id="complemento"
            name="complemento"
            [(ngModel)]="entregaObject.endereco.complemento"
            placeholder="Apto, bloco, referência..." />
        </div>

      </div>
      <!-- Ações -->
      <div class="col-12 flex gap-2 justify-content-end">
        <button pButton type="button" label="Limpar" class="p-button-secondary"
                >
        </button>
        <button pButton type="submit" label="Salvar" [disabled]="entregaForm.invalid"></button>
      </div>
    </div>
  </form>

